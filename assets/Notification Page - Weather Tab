type: custom:simple-tabs
pre-load: true
active-background: var(--md-sys-color-tertiary)
active-text-color: var(--md-sys-color-on-tertiary)
text-color: var(--primary-text-color)
tabs:
  - title: Forecast
    icon: mdi:weather-partly-cloudy
    card:
      type: vertical-stack
      cards:
        - type: custom:streamline-card
          template: title_subtitle_card
          variables:
            - title: Weather Forecast
            - subtitle: >-
                {% set forecasts =
                state_attr('sensor.hourly_forecasts_full_hourly_forecast','forecasts')
                %}{% if forecasts %}{% set rain_forecasts = forecasts |
                selectattr('precipitation','defined') |
                selectattr('precipitation','gt',0) | list %}{% if
                rain_forecasts | count > 0 %}{% set next_rain =
                rain_forecasts | first %}{% set val =
                next_rain.precipitation | float %}{% set limits =
                states.sensor.precipitation_limits.attributes %}{% set unit
                = state_attr('weather.forecast_home','precipitation_unit')
                %}{% if val < limits.light %}üå¶Ô∏è Light ¬∑ {{ val | round(1)
                }} {{ unit }} ¬∑ {{
                as_datetime(next_rain.datetime).strftime('%a, %b %d at %I:%M
                %p') }}{% elif val < limits.moderate %}üåßÔ∏è Moderate ¬∑ {{ val
                | round(1) }} {{ unit }} ¬∑ {{
                as_datetime(next_rain.datetime).strftime('%a, %b %d at %I:%M
                %p') }}{% elif val < limits.heavy %}‚õàÔ∏è Heavy ¬∑ {{ val |
                round(1) }} {{ unit }} ¬∑ {{
                as_datetime(next_rain.datetime).strftime('%a, %b %d at %I:%M
                %p') }}{% else %}‚õàÔ∏è Very heavy ¬∑ {{ val | round(1) }} {{
                unit }} ¬∑ {{ as_datetime(next_rain.datetime).strftime('%a,
                %b %d at %I:%M %p') }}{% endif %}{% else %}üå§Ô∏è No rain
                today{% endif %}{% else %}üå§Ô∏è N/A{% endif %}
        - type: vertical-stack
          cards:
            - type: custom:weather-forecast-extended-card
              entity: weather.forecast_home
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              entity: sensor.daily_weather_data_met_no
              icon: mdi:thermometer
              primary: >
                {% set current = state_attr('weather.forecast_home',
                'temperature') %}

                Temp: {{ current }} {{       state_attr('weather.forecast_home',
                'temperature_unit') }}
              secondary: >
                {% set forecast = state_attr('sensor.daily_weather_data_met_no',
                'forecast_data') %} {% if forecast is defined %}
                  {% set low = forecast.templow if forecast.templow is defined else 'N/A' %}
                  {% set high = forecast.temperature if forecast.temperature is defined else 'N/A' %}
                  Low: {{ low }} {{       state_attr('weather.forecast_home', 'temperature_unit') }} - High: {{ high }} {{       state_attr('weather.forecast_home', 'temperature_unit') }}
                {% else %}
                  Low: N/A - High: N/A
                {% endif %}
              color: >
                {% set current = state_attr('weather.forecast_home',
                'temperature') | float(0) %}  {% set L =
                states.sensor.temperature_limits.attributes %} {% if current
                < L.color_1 %}
                  #CEB2F5
                {% elif current < L.color_2 %}
                  #5EBDEE
                {% elif current < L.color_3 %}
                  #9cc8b8
                {% elif current < L.color_4 %}
                  #e7b562
                {% elif current < L.color_5 %}
                  #FF564B      
                {% else %}
                  #99332d
                {% endif %}
              features_position: bottom
              multiline_secondary: true
            - type: custom:mushroom-template-card
              entity: sensor.your_city_college_new_zealand_air_quality_index
              icon: mdi:leaf
              primary: Air Quality
              secondary: >-
                {% set aqi = state_attr('sensor.air_quality_level', 'aqi')
                    %} {% set pollutant = state_attr('sensor.air_quality_level',
                    'pollutant') %} {% if states('sensor.air_quality_level') not
                    in ['unavailable','unknown'] and aqi is not none %}
                      {{ states('sensor.air_quality_level') }} - AQI {{ aqi }} - {{ pollutant }}
                    {% else %}
                      Data unavailable
                    {% endif %}
                  color: "{{ states('sensor.air_quality_color') }}"
              features_position: bottom
              multiline_secondary: true
  - title: Rainfall
    icon: m3of:rainy
    card:
      type: vertical-stack
      cards:
        - type: custom:streamline-card
          template: title_subtitle_card
          variables:
            - title: Rainfall & Temperature Forecast
            - subtitle: >-
                {% set forecasts =
                state_attr('sensor.met_no_hourly_forecasts_full_hourly_forecast','forecasts')
                %}{% if forecasts %}{% set values = forecasts |
                map(attribute='precipitation') | map('float') | list %}{% set
                total = values | sum %}{% set peak = values | max %}{% set
                peak_entry = forecasts | selectattr('precipitation','eq', peak)
                | list | first %}{% if total == 0 %}üå§Ô∏è Rainfall: None expected
                in the next 24 hours{% else %}{% if total < 2.5 %}{% set
                category = 'Light' %}{% set emoji = 'üå¶Ô∏è' %}{% elif total < 7.6
                %}{% set category = 'Moderate' %}{% set emoji = 'üåßÔ∏è' %}{% elif
                total < 35 %}{% set category = 'Heavy' %}{% set emoji = '‚õàÔ∏è'
                %}{% else %}{% set category = 'Very heavy' %}{% set emoji = 'üåä'
                %}{% endif %}{{ emoji }} Rainfall: {{ total | round(1) }} {{
                state_attr('weather.forecast_home', 'precipitation_unit') }} ({{
                category }}), peaking {{ peak | round(1) }} {{
                state_attr('weather.forecast_home', 'precipitation_unit') }}/hr
                on {{ as_datetime(peak_entry.datetime).strftime('%a, %b %d at
                %I:%M %p') }}.{% endif %}{% else %}üå§Ô∏è Rainfall: N/A{% endif %}
        - type: vertical-stack
          cards:
            - type: custom:apexcharts-card
              header:
                show: true
              graph_span: 24h
              span:
                start: hour
              now:
                show: true
              apex_config:
                chart:
                  height: 240
                legend:
                  show: true
                grid:
                  yaxis:
                    lines:
                      show: false
                xaxis:
                  crosshairs:
                    show: false
                  tooltip:
                    enabled: false
                yaxis:
                  - id: rain
                    title:
                      text: Rain
                    opposite: false
                  - id: temp
                    title:
                      text: Temp
                    opposite: true
                  - id: humidity
                    title:
                      text: Humidity (%)
                    opposite: false
              series:
                - entity: sensor.hourly_forecasts_full_hourly_forecast
                  name: Rain
                  type: column
                  yaxis_id: rain
                  data_generator: >
                    const
                    forecasts=(entity.attributes&&entity.attributes.forecasts)||[];

                    const plEnt=hass.states['sensor.precipitation_limits'];

                    const pl=plEnt?plEnt.attributes||{}:{};

                    let light=Number(pl.light);let
                    moderate=Number(pl.moderate);let heavy=Number(pl.heavy);

                    if(!isFinite(light))light=2.5;if(!isFinite(moderate))moderate=7.6;if(!isFinite(heavy))heavy=35;

                    const data=[];

                    for(const f of forecasts){
                      const val=Number(f.precipitation||0);
                      let color='#9e9e9e';
                      if(val>0&&val<light){color='#4FC3F7';}
                      else if(val<moderate){color='#0288D1';}
                      else if(val<heavy){color='#01579B';}
                      else if(val>0){color='#311B92';}
                      data.push({x:new Date(f.datetime).getTime(),y:val,fillColor:color});
                    }

                    return data;
                - entity: sensor.hourly_forecasts_full_hourly_forecast
                  name: Temp
                  type: line
                  curve: smooth
                  yaxis_id: temp
                  stroke_width: 2
                  color: "#E53935"
                  data_generator: >
                    const
                    forecasts=(entity.attributes&&entity.attributes.forecasts)||[];

                    const data=[];

                    for(const f of forecasts){
                      data.push({x:new Date(f.datetime).getTime(),y:f.temperature});
                    }

                    return data;
                - entity: sensor.hourly_forecasts_full_hourly_forecast
                  name: Humidity
                  type: line
                  curve: smooth
                  yaxis_id: humidity
                  stroke_width: 2
                  color: "#42A5F5"
                  data_generator: >
                    const
                    forecasts=(entity.attributes&&entity.attributes.forecasts)||[];

                    const data=[];

                    for(const f of forecasts){
                      const val=(f.humidity!==undefined&&f.humidity!==null)?Number(f.humidity):null;
                      data.push({x:new Date(f.datetime).getTime(),y:val});
                    }

                    return data;
            - type: horizontal-stack
              cards:
                - type: custom:mushroom-template-card
                  entity: sensor.forecast_rainfall
                  icon: mdi:weather-rainy
                  primary: >
                    {% set r_raw = states('sensor.forecast_rainfall') %} {%
                    set invalid = ['unknown', 'unavailable', 'none', ''] %}
                    {% set unit = state_attr('weather.forecast_home',
                    'precipitation_unit') %} {% if r_raw in invalid %}
                      Rainfall: None
                    {% else %}
                      {% set r = r_raw | float(none) %}
                      {% if r is none %}
                        Rainfall: N/A
                      {% else %}
                        Rainfall: {{ r | round(1) }} {{ unit }}
                      {% endif %}
                    {% endif %}
                  secondary: >
                    {% set r_raw = states('sensor.forecast_rainfall') %} {%
                    set invalid = ['unknown', 'unavailable', 'none', ''] %}
                    {% set L = states.sensor.precipitation_limits.attributes
                    %} {% if r_raw in invalid or not L %}
                      None - Dry conditions
                    {% else %}
                      {% set r = r_raw | float(none) %}
                      {% if r is none %}
                        None - Dry conditions
                      {% else %}
                        {% set drizzle = L.desc_drizzle | float(none) %}
                        {% set moderate = L.desc_moderate | float(none) %}
                        {% set heavy = L.desc_heavy | float(none) %}
                        {% if drizzle is none or moderate is none or heavy is none %}
                          None - Dry conditions
                        {% else %}
                          {% if r == 0 %}
                            None - Dry conditions
                          {% elif r < drizzle %}
                            Light - Possible drizzle
                          {% elif r < moderate %}
                            Moderate - Bring umbrella
                          {% elif r < heavy %}
                            Heavy - Wet outdoors
                          {% else %}
                            Intense - Flood risk
                          {% endif %}
                        {% endif %}
                      {% endif %}
                    {% endif %}
                  color: >
                    {% set r_raw = states('sensor.forecast_rainfall') %} {%
                    set invalid = ['unknown', 'unavailable', 'none', ''] %}
                    {% set L = states.sensor.precipitation_limits.attributes
                    %} {% if r_raw in invalid or not L %}
                      blue
                    {% else %}
                      {% set r = r_raw | float(none) %}
                      {% if r is none %}
                        blue
                      {% else %}
                        {% set drizzle = L.desc_drizzle | float(none) %}
                        {% set moderate = L.desc_moderate | float(none) %}
                        {% set heavy = L.desc_heavy | float(none) %}
                        {% if drizzle is none or moderate is none or heavy is none %}
                          blue
                        {% else %}
                          {% if r == 0 %}
                            blue
                          {% elif r < drizzle %}
                            lightblue
                          {% elif r < moderate %}
                            cyan
                          {% elif r < heavy %}
                            orange
                          {% else %}
                            red
                          {% endif %}
                        {% endif %}
                      {% endif %}
                    {% endif %}
                  features_position: bottom
                  multiline_secondary: true
                - type: custom:mushroom-template-card
                  entity: sensor.daily_weather_data
                  icon: mdi:thermometer
                  primary: >
                    {% set current = state_attr('weather.forecast_home',
                    'temperature') %}

                    {% set unit = state_attr('weather.forecast_home',
                    'temperature_unit') %}

                    Temp: {{ current }} {{ unit }}
                  secondary: >
                    {% set unit = state_attr('weather.forecast_home',
                    'temperature_unit') %} {% set forecast =
                    state_attr('sensor.daily_weather_data', 'forecast_data')
                    %} {% if forecast is defined %}
                      {% set low = forecast.templow if forecast.templow is defined else 'N/A' %}
                      {% set high = forecast.temperature if forecast.temperature is defined else 'N/A' %}
                      Low: {{ low }} {{ unit }} - High: {{ high }} {{ unit }}
                    {% else %}
                      Low: N/A - High: N/A
                    {% endif %}
                  color: >
                    {% set current = state_attr('weather.forecast_home',
                    'temperature') | float(0) %}  {% set L =
                    states.sensor.temperature_limits.attributes %} {% if
                    current < L.color_1 %}
                      #CEB2F5
                    {% elif current < L.color_2 %}
                      #5EBDEE
                    {% elif current < L.color_3 %}
                      #9cc8b8
                    {% elif current < L.color_4 %}
                      #e7b562
                    {% elif current < L.color_5 %}
                      #FF564B      
                    {% else %}
                      #99332d
                    {% endif %}
                  features_position: bottom
                  multiline_secondary: true
        - type: custom:mushroom-template-card
          entity: weather.forecast_home
          icon: mdi:water-percent
          primary: >
            {% set current = state_attr('weather.forecast_home', 'humidity')
            %} {% if current is not none %}
              Humidity: {{ current }}%
            {% else %}
              Humidity: N/A
            {% endif %}
          secondary: >
            {% set forecasts =
            state_attr('sensor.hourly_forecasts_full_hourly_forecast',
            'forecasts') %} {% if forecasts %}
              {% set hum_list = forecasts
                   | selectattr('humidity', 'defined')
                   | map(attribute='humidity')
                   | map('float')
                   | list %}
              {% if hum_list | count > 0 %}
                {% set min_h = hum_list | min %}
                {% set max_h = hum_list | max %}
                Next 24h range: {{ min_h | round(0) }}‚Äì{{ max_h | round(0) }}%
              {% else %}
                Next 24h range: N/A
              {% endif %}
            {% else %}
              Next 24h range: N/A
            {% endif %}
          color: >
            {% set current = state_attr('weather.forecast_home', 'humidity')
            | float(none) %} {% if current is none %}
              grey
            {% elif current < 30 %}
              orange      {# Dry #}
            {% elif current < 60 %}
              green       {# Comfortable #}
            {% else %}
              blue        {# Humid / muggy #}
            {% endif %}
          features_position: bottom
          multiline_secondary: true
  - title: UV
    icon: m3of:sunny
    card:
      type: vertical-stack
      cards:
        - type: custom:streamline-card
          template: title_subtitle_card
          variables:
            - title: UV Index & Cloud Coverage Forecast
            - subtitle: >-
                {% set forecasts =
                state_attr('sensor.met_no_hourly_forecasts_full_hourly_forecast','forecasts')
                %}{% if forecasts %}{% set uv_values = forecasts |
                map(attribute='uv_index') | map('float') | list %}{% set peak_uv
                = uv_values | max %}{% set peak_entry = forecasts |
                selectattr('uv_index','eq', peak_uv) | list | first %}{% set
                cloud_values = forecasts | map(attribute='cloud_coverage') |
                map('float') | list %}{% set avg_cloud = (cloud_values | sum /
                cloud_values | length) %}{% if peak_uv < 3 %}{% set uv_category
                = 'Low' %}{% set uv_emoji = 'üü¢' %}{% elif peak_uv < 6 %}{% set
                uv_category = 'Moderate' %}{% set uv_emoji = 'üü°' %}{% elif
                peak_uv < 8 %}{% set uv_category = 'High' %}{% set uv_emoji =
                'üü†' %}{% elif peak_uv < 11 %}{% set uv_category = 'Very High'
                %}{% set uv_emoji = 'üî¥' %}{% else %}{% set uv_category =
                'Extreme' %}{% set uv_emoji = 'üü£' %}{% endif %}{% if avg_cloud
                <= 25 %}{% set cloud_category = 'Clear' %}{% set cloud_emoji =
                '‚òÄÔ∏è' %}{% elif avg_cloud <= 50 %}{% set cloud_category = 'Partly
                Cloudy' %}{% set cloud_emoji = 'üå§Ô∏è' %}{% elif avg_cloud <= 75
                %}{% set cloud_category = 'Mostly Cloudy' %}{% set cloud_emoji =
                '‚õÖ' %}{% else %}{% set cloud_category = 'Overcast' %}{% set
                cloud_emoji = '‚òÅÔ∏è' %}{% endif %}{{ uv_emoji }} Peak UV: {{
                peak_uv | round(1) }} ({{ uv_category }}), {{ cloud_emoji }} Avg
                Cloud: {{ avg_cloud | round(0) }}% ({{ cloud_category }}),
                peaking at {{ as_datetime(peak_entry.datetime).strftime('%a, %b
                %d at %I:%M %p') }}.{% else %}üå§Ô∏è UV & Cloud Forecast: N/A{%
                endif %}
        - type: vertical-stack
          cards:
            - type: custom:apexcharts-card
              graph_span: 24h
              span:
                start: hour
              now:
                show: true
              apex_config:
                chart:
                  height: 240
                legend:
                  show: true
                grid:
                  yaxis:
                    lines:
                      show: false
                xaxis:
                  crosshairs:
                    show: false
                  tooltip:
                    enabled: false
                yaxis:
                  - id: uv
                    title:
                      text: UV Index
                    opposite: false
                    min: 0
                    max: 11
                  - id: cloud
                    title:
                      text: Cloud Coverage (%)
                    opposite: true
                    min: 0
                    max: 100
              series:
                - entity: sensor.met_no_hourly_forecasts_full_hourly_forecast
                  name: UV Index
                  type: line
                  curve: smooth
                  yaxis_id: uv
                  color: "#F9A825"
                  stroke_width: 2
                  data_generator: |
                    return entity.attributes.forecasts.map(f => {
                      if (f.uv_index == null) return null;
                      return { x: new Date(f.datetime).getTime(), y: f.uv_index };
                    }).filter(x => x !== null);
                - entity: sensor.met_no_hourly_forecasts_full_hourly_forecast
                  name: Cloud Coverage
                  type: area
                  yaxis_id: cloud
                  color: "#90CAF9"
                  stroke_width: 1
                  opacity: 0.3
                  data_generator: |
                    return entity.attributes.forecasts.map(f => {
                      if (f.cloud_coverage == null) return null;
                      return { x: new Date(f.datetime).getTime(), y: f.cloud_coverage };
                    }).filter(x => x !== null);
            - type: horizontal-stack
              cards:
                - type: custom:mushroom-template-card
                  entity: sensor.forecast_uv_index
                  icon: mdi:weather-sunny-alert
                  primary: |
                    UV Index: {{ states('sensor.forecast_uv_index') }}
                  secondary: >
                    {% set uv = states('sensor.forecast_uv_index') | float(0) %}
                    {% if uv < 3 %}
                      Low - Safe outdoors
                    {% elif uv < 6 %}
                      Moderate - Use hat & sunglasses
                    {% elif uv < 8 %}
                      High - Apply sunscreen
                    {% elif uv < 11 %}
                      Very High - Seek shade
                    {% else %}
                      Extreme - Stay indoors
                    {% endif %}
                  color: >
                    {% set uv = states('sensor.forecast_uv_index') | float(0) %}
                    {% if uv < 3 %}
                      green
                    {% elif uv < 6 %}
                      yellow
                    {% elif uv < 8 %}
                      orange
                    {% elif uv < 11 %}
                      red
                    {% else %}
                      purple
                    {% endif %}
                  features_position: bottom
                  multiline_secondary: true
                - type: custom:mushroom-template-card
                  entity: sensor.forecast_cloud_coverage
                  icon: mdi:weather-cloudy
                  primary: |
                    Cloud: {{ states('sensor.forecast_cloud_coverage') }}%
                  secondary: >
                    {% set c = states('sensor.forecast_cloud_coverage') |
                    float(0) %} {% if c <= 25 %}
                      Clear skies - ideal visibility
                    {% elif c <= 50 %}
                      Partly cloudy - some sun breaks
                    {% elif c <= 75 %}
                      Mostly cloudy - limited sunshine
                    {% else %}
                      Overcast - likely dull conditions
                    {% endif %}
                  color: >
                    {% set c = states('sensor.forecast_cloud_coverage') |
                    float(0) %} {% if c <= 25 %}
                      blue
                    {% elif c <= 50 %}
                      light-blue
                    {% elif c <= 75 %}
                      grey
                    {% else %}
                      blue-grey
                    {% endif %}
                  features_position: bottom
                  multiline_secondary: true
  - title: Wind
    icon: m3of:storm
    card:
      type: vertical-stack
      cards:
        - type: custom:decluttering-card
          template: mushroom_title_subtitle_card
          variables:
            - title: Wind Speed & Direction Forecast
            - subtitle: >-
                {% set forecasts =
                state_attr('sensor.hourly_forecasts_full_hourly_forecast','forecasts')
                %}{% if forecasts %}{% set speeds = forecasts |
                map(attribute='wind_speed') | map('float') | list %}{% set
                peak = speeds | max %}{% set peak_entry = forecasts |
                selectattr('wind_speed','eq', peak) | list | first %}{% set
                avg_bearing = (forecasts | map(attribute='wind_bearing') |
                list | sum / (forecasts | length)) %}{% set dirs =
                ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW']
                %}{% set direction = dirs[((avg_bearing + 11.25) / 22.5) |
                int % 16] %}{% set unit =
                state_attr('weather.forecast_home', 'wind_speed_unit') %}{%
                set L = states.sensor.wind_speed_limits.attributes %}{% if
                not L %}{% set category = 'Unknown' %}{% set emoji = '‚ùì'
                %}{% else %}{% set calm = L.calm | float(none) %}{% set
                breezy = L.breezy | float(none) %}{% set windy = L.windy |
                float(none) %}{% set strong = L.strong | float(none) %}{% if
                calm is none or breezy is none or windy is none or strong is
                none %}{% set category = 'Unknown' %}{% set emoji = '‚ùì' %}{%
                else %}{% if peak < calm %}{% set category = 'Calm' %}{% set
                emoji = 'üå´Ô∏è' %}{% elif peak < breezy %}{% set category =
                'Breezy' %}{% set emoji = 'üçÉ' %}{% elif peak < windy %}{%
                set category = 'Windy' %}{% set emoji = 'üåø' %}{% elif peak
                < strong %}{% set category = 'Strong' %}{% set emoji = 'üå¨Ô∏è'
                %}{% else %}{% set category = 'Gale' %}{% set emoji = 'üåÄ'
                %}{% endif %}{% endif %}{% endif %}{{ emoji }} Winds: {{
                peak | round(1) }} {{ unit }} ({{ category }}), mostly from
                {{ direction }}, peaking {{
                as_datetime(peak_entry.datetime).strftime('%a, %b %d at
                %I:%M %p') }}.{% else %}üå§Ô∏è Winds: N/A{% endif %}
        - type: vertical-stack
          cards:
            - type: custom:apexcharts-card
              graph_span: 24h
              span:
                start: hour
              now:
                show: true
              apex_config:
                chart:
                  height: 240
                legend:
                  show: true
                grid:
                  yaxis:
                    lines:
                      show: false
                xaxis:
                  crosshairs:
                    show: false
                  tooltip:
                    enabled: false
                yaxis:
                  - id: speed
                    title:
                      text: Wind Speed
                    opposite: false
                  - id: direction
                    title:
                      text: Direction (¬∞)
                    opposite: true
                    min: 0
                    max: 360
              series:
                - entity: sensor.hourly_forecasts_full_hourly_forecast
                  name: Speed
                  type: line
                  curve: smooth
                  yaxis_id: speed
                  color: "#0288D1"
                  stroke_width: 2
                  data_generator: >
                    const
                    forecasts=(entity.attributes&&entity.attributes.forecasts)||[];

                    const data=[];

                    for(const f of forecasts){
                      let speed=Number(f.wind_speed||0);
                      speed=Math.round(speed*10)/10;
                      data.push({x:new Date(f.datetime).getTime(),y:speed});
                    }

                    return data;
                - entity: sensor.hourly_forecasts_full_hourly_forecast
                  name: Direction
                  type: line
                  curve: smooth
                  yaxis_id: direction
                  color: "#8E24AA"
                  stroke_width: 1
                  data_generator: >
                    const
                    forecasts=(entity.attributes&&entity.attributes.forecasts)||[];

                    const data=[];

                    for(const f of forecasts){
                      const direction=Math.round(Number(f.wind_bearing||0));
                      data.push({x:new Date(f.datetime).getTime(),y:direction});
                    }

                    return data;
            - type: horizontal-stack
              cards:
                - type: custom:mushroom-template-card
                  entity: sensor.wind_speed_level
                  icon: mdi:weather-windy
                  primary: >
                    {% set s = state_attr('sensor.wind_speed_level',
                    'speed') %} {% set unit =
                    state_attr('sensor.wind_speed_level', 'unit') %} Wind:
                    {{ s }} {{ unit }}
                  secondary: >
                    {% set level = states('sensor.wind_speed_level') %} {%
                    set s = state_attr('sensor.wind_speed_level', 'speed') |
                    float(none) %} {% set dir_label =
                    states('sensor.wind_direction_level') %} {% set dir_deg
                    = state_attr('sensor.wind_direction_level', 'bearing') |
                    float(none) %} {% if level in ['unavailable','unknown']
                    or s is none %}
                      Wind data unavailable
                    {% else %}
                      {% if level == 'Calm' %}
                        Calm - Smooth air
                      {% elif level == 'Breezy' %}
                        Breezy - Light gusts
                      {% elif level == 'Windy' %}
                        Windy - Secure items
                      {% elif level == 'Strong' %}
                        Strong - Use caution
                      {% else %}
                        Gale - Stay indoors
                      {% endif %}
                      {% if dir_label not in ['unavailable','unknown'] and dir_deg is not none %}
                        ¬∑ {{ dir_label }} ({{ dir_deg | round(0) }}¬∞)
                      {% endif %}
                    {% endif %}
                  color: "{{ states('sensor.wind_speed_color') }}"
                  features_position: bottom
  - title: Lunar
    icon: m3of:moon-stars
    card:
      type: vertical-stack
      cards:
        - type: custom:lunar-phase-card
          entity: zone.home
          12hr_format: false
          calendar_modal: true
          compact_view: true
          default_card: base
          hide_buttons: false
          mile_unit: true
          moon_position: left
          number_decimals: 2
          selected_language: en
          show_background: true
          southern_hemisphere: false
          use_custom: false
          use_default: false
          use_entity: true
          graph_config:
            graph_type: default
            y_ticks: true
            x_ticks: true
            show_time: true
            show_current: true
            show_highest: true
            y_ticks_position: left
            y_ticks_step_size: 30
            time_step_size: 30
          font_customize:
            header_font_size: x-large
            header_font_style: capitalize
            header_font_color: ""
            label_font_size: auto
            label_font_style: none
            label_font_color: ""
            hide_label: false
          latitude: 45.3914672
          longitude: -122.78688778406244
          location:
            city: Tualatin
            country: United States
          theme:
            selected_theme: Material You
          hide_items:
            - altitudeDegrees
            - azimuthDegress
            - moonAge
            - distance
        - type: custom:sky-tonight-card
          showSun: false
          showBelowHorizon: false
          showConfiguration: false
  - title: Radar
    icon: mdi:radar
    card:
      type: vertical-stack
      cards:
        - type: custom:streamline-card
          template: title_subtitle_card
          variables:
            - title: Radar
            - subtitle: >-
                {% set weather = states.weather.forecast_home.attributes %}{%
                set temp = weather.temperature %}{% set temp_unit =
                weather.temperature_unit %}{% set humidity = weather.humidity
                %}{% set cloud = weather.cloud_coverage %}{% set uv =
                weather.uv_index %}{% set pressure = weather.pressure %}{% set
                wind_speed = weather.wind_speed %}{% set wind_unit =
                weather.wind_speed_unit %}üå°Ô∏è {{ temp }}{{ temp_unit }} üíß
                Humidity: {{ humidity }}% ‚òÅÔ∏è Clouds: {{ cloud | round }}% üí®
                Wind: {{ wind_speed }} {{ wind_unit }} üå§Ô∏è UV index: {{ uv }}
        - type: custom:mod-card
          card:
            type: iframe
            url: >-
              https://embed.windy.com/embed2.html?lat=xxx&lon=yyy&width=800&height=600
          style: |
            ha-card {
              padding: 0;
              height: 600px !important;   /* fix height */
              width: 100% !important;
              overflow: hidden;
            }
            iframe {
              width: 100% !important;
              height: 100% !important;
            }
